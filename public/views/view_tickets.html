<head>
  <!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  Include jQuery Validation Plugin -->
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.19.3/jquery.validate.min.js"></script>
  <!-- Optional: Include additional rules/messages for validation -->
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.19.3/additional-methods.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<style>
  label.error {
    color: red;
    font-style: italic;
  }
</style>
<style>
  table,
  th,
  td {
    border: 1px solid #d1d1d1;
    text-align: center;
  }

  table tr {
    background-color: #f8f8f8;
    border: 1px solid #ddd;
    padding: .35em;
  }

  .row.mb-3 {
    display: flex;
    align-items: flex-start;
    gap: 20px;
  }

  .col {
    flex-grow: 1;
  }

  .selected-value {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
    justify-content: space-between;
    padding: 5px 0;
    border-bottom: 1px solid #ccc;
  }

  .value-column {
    flex-grow: 1;
  }

  .remove-column {
    width: 30px;
    text-align: center;
  }

  .remove-btn {
    background-color: transparent;
    border: none;
    cursor: pointer;
    font-size: 16px;
    color: #d9534f;
    /* Red color for the remove button */
  }
</style>
<style>
  .container {
    display: flex;
    padding: 20px;
  }

  .form-container {
    flex: 1;
    margin-right: 20px;
    background-color: #e7f6e7;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }

  .side-panel {
    flex: 1;
    margin-right: 20px;
    background-color: #e7f6e7;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);

  }

  .form-group {
    margin-bottom: 1.5em;
  }

  .form-control {
    width: 100%;
    padding: 0.5em;
    margin-top: 0.5em;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  .form-control-label {
    margin-bottom: 0.5em;
    font-weight: bold;
  }

  .form-group input[type="date"],
  .form-group select,
  .form-group textarea,
  .form-group input[type="text"],
  .custom-file-input {
    width: 100%;
    margin-top: 0.5em;
  }

  .custom-file {
    display: flex;
    align-items: center;
    margin-top: 0.5em;
  }

  .custom-file-label {
    margin-left: 10px;
  }

  .btn {
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 1em;
  }

  .btn-success {
    background-color: #28a745;
    color: #fff;
  }

  .btn-success:hover {
    background-color: #218838;
  }

  .side-panel {
    flex: 0.3;
    background-color: #ffffff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }

  .side-panel h3 {
    margin-top: 0;
  }

  .side-panel .form-group {
    margin-bottom: 1.5em;
  }

  .side-panel .form-control {
    width: 100%;
    padding: 0.5em;
    margin-top: 0.5em;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  .side-panel .form-group input[type="date"] {
    width: 100%;
  }

  .side-panel .custom-select {
    width: 100%;
    padding: 0.5em;
    border: 1px solid #ccc;
    border-radius: 4px;
    background-color: #fff;
    position: relative;
  }

  .side-panel .custom-options {
    display: none;
    position: absolute;
    width: 100%;
    border: 1px solid #ccc;
    border-top: none;
    border-radius: 0 0 4px 4px;
    background-color: #fff;
    z-index: 1000;
    max-height: 200px;
    overflow-y: auto;
  }

  .side-panel .custom-options div {
    padding: 0.5em;
    cursor: pointer;
  }

  .side-panel .custom-options div:hover {
    background-color: #f1f1f1;
  }

  .custom-select-severity {
    position: relative;
    width: 100%;
    height: 2.4rem;
    /* Adjust height as needed */
  }

  .custom-select-severity option {
    display: flex;
    align-items: center;
  }

  .custom-select-severity option::before {
    content: "";
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 8px;
    vertical-align: middle;
  }

  .custom-select-severity option[value="Low"]::before {
    background-color: green;
  }

  .custom-select-severity option[value="Medium"]::before {
    background-color: orange;
  }

  .custom-select-severity option[value="High"]::before {
    background-color: red;
  }
</style>
<style>
  .tooltip {
    position: relative;
    display: inline-block;
    cursor: pointer;
  }

  .tooltip .tooltiptext {
    visibility: hidden;
    width: 120px;
    background-color: #fff;
    color: #000;
    text-align: center;
    border-radius: 6px;
    padding: 5px 0;
    border: 1px solid #000000;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s;
    white-space: nowrap;
  }

  .tooltip .tooltiptext::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #000000 transparent transparent transparent;
  }

  .tooltip:hover .tooltiptext {
    visibility: visible;
    opacity: 1;
  }
</style>
<!-- <style>
  [data-tooltip] {
    position: relative;
    display: inline-block;
    cursor: pointer;
  }

  [data-tooltip]::before {
    content: attr(data-tooltip);
    visibility: hidden;
    width: 100px;
    background-color: #fff;
    color: #000;
    text-align: left;
    border-radius: 6px;
    padding: 5px 0;
    border: 1px solid #ccc;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    white-space: nowrap;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    /* Adjust this value based on your requirements */
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s;
  }

  [data-tooltip]::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #ccc transparent transparent transparent;
  }

  [data-tooltip]:hover::before {
    visibility: visible;
    opacity: 1;
  }
</style> -->

<style>
  .summary-card {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
  }

  .summary-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
  }

  .summary-item {
    flex-grow: 1;
    margin: 10px;
    padding: 15px;
    border: 1px solid #ccc;
    /* Added border */
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
  }

  .summary-item .badge {
    display: inline-block;
    font-size: 1em;
    padding: 5px 10px;
    margin-bottom: 10px;
    /* Space between badge and number */
  }

  .summary-item h3 {
    font-size: 1.5em;
    margin: 0;
  }

  /* General active state styling */
  .summary-card .summary-item.active {
    border-radius: 4px;
    padding: 10px;
  }

  /* Specific active states for each card */
  .summary-card #totalticket.active {
    background-color: #d1ecf1;
    /* Light blue background */
    border: 1px solid #17a2b8;
    /* Border color to match the active state */
  }

  .summary-card #totalticket.active .badge {
    background-color: #17a2b8;
    /* Badge color to match the active state */
    color: #fff;
    /* White text color */
  }

  .summary-card #assignticket.active {
    background-color: #e2e3e5;
    /* Light gray background */
    border: 1px solid #6c757d;
    /* Border color to match the active state */
  }

  .summary-card #assignticket.active .badge {
    background-color: #6c757d;
    /* Badge color to match the active state */
    color: #fff;
    /* White text color */
  }

  .summary-card #pendingticket.active {
    background-color: #fff3cd;
    /* Light yellow background */
    border: 1px solid #ffc107;
    /* Border color to match the active state */
  }

  .summary-card #pendingticket.active .badge {
    background-color: #ffc107;
    /* Badge color to match the active state */
    color: #212529;
    /* Dark text color */
  }

  .summary-card #closedticket.active {
    background-color: #f8d7da;
    /* Light red background */
    border: 1px solid #dc3545;
    /* Border color to match the active state */
  }

  .summary-card #closedticket.active .badge {
    background-color: #dc3545;
    /* Badge color to match the active state */
    color: #fff;
    /* White text color */
  }
</style>

<div class="container-fluid p-0">

  <h1 class="h3 mb-3"><b>View Tickets</b></h1>
  <!-- <h1 class="h3 mb-3" data-tooltip="List all tickets" id="viewlist"><i class="far fa-lg fa-list-alt"></i></h1> -->
  <h1 class="h3 mb-3" title="List all tickets" id="viewlist"><i class="far fa-lg fa-list-alt"></i></h1>


  <div class="row" id="summary_data">
    <div class="col-12 col-md-12 col-xxl-6 d-flex order-3 order-xxl-2">
      <div class="card flex-fill w-100 summary-card">
        <div class="card-header">
          <h3 class="h3 mb-3">Ticket Summary</h3>
        </div>
        <div class="card-body d-flex align-items-center justify-content-between summary-content">

          <div class="summary-item active" id="totalticket"> <!-- Add active class here -->
            <div class="badge bg-primary text-uppercase">Total tickets</div>
            <h3 class="my-0"><span id="total_ticket"></span></h3>
          </div>

          <div class="summary-item" id="assignticket">
            <div class="badge bg-secondary text-uppercase">Assigned to me</div>
            <h3 class="my-0"><span id="asssign_ticket"></span></h3>
          </div>
          <!-- <div class="summary-item">
            <div class="badge bg-secondary text-uppercase">Assigned to others</div>
            <h3 class="my-0">0</h3>
          </div> -->
          <!-- <div class="summary-item">
            <div class="badge bg-secondary text-uppercase">Unassigned</div>
            <h3 class="my-0">1</h3>
          </div> -->
          <div class="summary-item" id="pendingticket">
            <div class="badge bg-warning text-uppercase">Pending Tickets</div>
            <h3 class="my-0"><span id="pending_tickets"></span></h3>
          </div>
          <div class="summary-item" id="closedticket">
            <div class="badge bg-danger text-uppercase">Closed Tickets</div>
            <h3 class="my-0"><span id="closed_ticket"></span></h3>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="row" id="user_list">

    <div class="col-12 col-md-12 col-xxl-6 d-flex order-3 order-xxl-2">
      <div class="card flex-fill w-100">

        <div class="card-body px-4">
          <!-- <button>export</button> -->
          <table id="makerTable12" class="table table-striped table-bordered" cellspacing="0" width="100%">

            <thead>
              <tr style="background: #e3beff;color: #6200af;">
                <th>Ticket ID</th>
                <th>Title</th>
                <th>Severity</th>
                <th>Category</th>
                <th>Assign To</th>
                <th>Status</th>
                <th>Opening Date</th>
                <th>Last Updated</th>



              </tr>
            </thead>
            <tbody>

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="row" id="edit_form">
    <div class="container">


      <div class="form-container">
        <div class="card">
          <div class="card-body">
            <h3>Raise a Ticket</h3>
            <form id="uploadForm" enctype="multipart/form-data">


              <input id="ticket_id" type="text" name="ticket_id" required="" class="form-control"
                placeholder="ID of the ticket" hidden>


              <div class="form-group">
                <label class="form-control-label" for="subject">Title</label>
                <input id="subject" type="text" name="subject" required="" class="form-control"
                  placeholder="Title of the ticket">
              </div>

              <div class="form-group">
                <label class="form-control-label" for="subject">Purpose</label>
                <input id="purpose" type="text" name="purpose" required="" class="form-control"
                  placeholder="Purpose of the ticket">
              </div>


              <div class="form-group">
                <label class="form-control-label" for="purpose">Description</label>
                <textarea id="message" name="message" required="" class="form-control"
                  placeholder="Description of the ticket"></textarea>
              </div>

              <div class="form-group">
                <label class="form-control-label" for="message">File (Limit 20MB)</label>
                <div class="custom-file">
                  <input id="fileInput" type="file" class="custom-file-input" name="file"
                    onchange="handleFileUpload(event)">
                  <!-- <label class="custom-file-label" for="fileInput">Choose file</label> -->
                </div>
              </div>
              <div id="filePreview"></div>

              <div class="form-group">
                <div id="file_submit_result"></div>
                <input type="hidden" id="filePath">
              </div>

              <div class="form-group">
                <ul id="attached_files"></ul>
              </div>

              <div class="form-group">
                <input type="button" id="create_ticket" value="Edit Ticket" class="btn btn-success"
                  onclick="edittickets()">
              </div>
            </form>

            <div id="result_create_ticket"></div>
          </div>
        </div>
      </div>

      <div class="side-panel">
        <h3>Details of Ticket</h3>

        <div class="form-group">
          <label class="form-control-label" for="category_dd">Category</label>
          <select name="category" id="category_dd" class="form-control">
            <option value="null">Select category</option>
            <option value="General">General</option>
            <option value="Support">Support</option>
            <option value="Billing">Billing</option>
            <option value="Others">Others</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-control-label" for="severity_dd">Severity</label>
          <select name="category" id="severity_dd" class="form-control custom-select-severity">
            <option value="">Select Severity</option>
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
          </select>
        </div>


        <div class="form-group">
          <label class="form-control-label" for="cc_dd">CC</label>
          <select name="cc_dd" id="cc_dd" class="form-control"></select>

        </div>

        <div class="form-group">
          <label class="form-control-label" for="assignto">Assigned To</label>
          <select name="assignto" id="assignto" class="form-control"></select>
        </div>

        <div class="form-group">
          <label class="form-control-label" for="date">Assigned On</label>
          <input type="date" id="date" name="date" class="form-control">
        </div>
      </div>
    </div>
  </div>



</div>

<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="../assets/js/select2.min.js"></script>
<script src="../static/js/view_tickets.js"></script>

<!-- <script src="../assets/js/jquery.validate.js"></script>
    <script src="../assets/js/jquery.multi-select.js"></script> -->
<!-- <script src="../assets/js/jquery-validate-min.js"></script> -->


<!-- <script>
  document.addEventListener("DOMContentLoaded", function () {
    const elements = document.querySelectorAll('[title]');
    elements.forEach(el => {
      const tooltipText = el.getAttribute('title');
      el.setAttribute('data-tooltip', tooltipText);
      el.removeAttribute('title');
    });
  });

</script> -->

<script>

  $('#user_list').show();
  $('#user_form').hide();
  $('#user_bulk').hide();


</script>